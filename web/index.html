<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YuJa Prospect Intelligence Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1e40af;
            --primary-dark: #1e3a8a;
            --success: #16a34a;
            --warning: #eab308;
            --danger: #dc2626;
            --gray: #6b7280;
            --light-gray: #f3f4f6;
            --border: #e5e7eb;
            --text: #111827;
            --text-secondary: #6b7280;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            background: white;
            padding: 1.5rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .product-selector {
            display: flex;
            gap: 1rem;
        }

        .product-btn {
            padding: 0.5rem 1.5rem;
            border: 2px solid var(--border);
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .product-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 64, 175, 0.3);
        }

        .main-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--light-gray), white);
            padding: 1.5rem;
            border-radius: 10px;
            border: 1px solid var(--border);
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }

        .stat-label {
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        .search-filter {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .filter-select {
            padding: 0.75rem 1rem;
            border: 2px solid var(--border);
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: border-color 0.3s;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .export-btn {
            padding: 0.75rem 1.5rem;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .export-btn:hover {
            background: #15803d;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);
        }

        .prospects-table {
            width: 100%;
            border-collapse: collapse;
        }

        .prospects-table th {
            background: var(--light-gray);
            padding: 1rem;
            text-align: left;
            font-weight: 600;
            color: var(--text);
            border-bottom: 2px solid var(--border);
        }

        .prospects-table td {
            padding: 1rem;
            border-bottom: 1px solid var(--border);
        }

        .prospects-table tr {
            transition: background 0.2s;
            cursor: pointer;
        }

        .prospects-table tr:hover {
            background: #f9fafb;
        }

        .score-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .score-high {
            background: #dcfce7;
            color: var(--success);
        }

        .score-medium {
            background: #fef3c7;
            color: #a16207;
        }

        .score-low {
            background: #f3f4f6;
            color: var(--gray);
        }

        .stage-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .stage-p1 {
            background: var(--primary);
            color: white;
        }

        .stage-nurture {
            background: #fbbf24;
            color: white;
        }

        .stage-research {
            background: var(--gray);
            color: white;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            margin: 2rem;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 2rem;
            border-bottom: 2px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, var(--light-gray), white);
            border-radius: 12px 12px 0 0;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--text);
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
            transition: color 0.3s;
        }

        .close-btn:hover {
            color: var(--danger);
        }

        .modal-body {
            padding: 2rem;
        }

        .detail-section {
            margin-bottom: 2rem;
        }

        .detail-section h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            background: var(--light-gray);
            padding: 1rem;
            border-radius: 8px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }

        .info-value {
            font-weight: 500;
            color: var(--text);
        }

        .evidence-list {
            list-style: none;
            padding: 0;
        }

        .evidence-item {
            background: #f9fafb;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            border-left: 4px solid var(--primary);
        }

        .evidence-date {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
        }

        .contact-card {
            background: linear-gradient(135deg, #f3f4f6, white);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            border: 1px solid var(--border);
            transition: transform 0.2s;
        }

        .contact-card:hover {
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .contact-name {
            font-weight: 600;
            color: var(--text);
        }

        .contact-title {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .contact-info {
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: var(--primary);
        }

        .outreach-template {
            background: #f0fdf4;
            padding: 1.5rem;
            border-radius: 8px;
            border: 2px solid #86efac;
            font-family: monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            white-space: pre-wrap;
        }

        .copy-btn {
            margin-top: 1rem;
            padding: 0.5rem 1rem;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            background: #15803d;
            transform: translateY(-2px);
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: var(--text-secondary);
        }

        .home-view {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            padding: 2rem;
        }

        .product-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), #a855f7);
        }

        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border-color: var(--primary);
        }

        .product-card h2 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }

        .product-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .product-stats {
            display: flex;
            justify-content: space-between;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .product-stat {
            text-align: center;
        }

        .product-stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary);
        }

        .product-stat-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // Sample prospect data
        const prospectData = {
            verity: [
                {
                    id: 1,
                    name: "State University of California",
                    domain: "stateu.edu",
                    region: "West",
                    timezone: "PST",
                    score: 87,
                    stage: "P1",
                    lms: "Canvas",
                    currentTools: ["ProctorU", "Respondus"],
                    modalityMix: "60% online, 30% hybrid, 10% on-campus",
                    whyNow: "Contract renewal in 3 months, faculty complaints about false flags",
                    policySignals: [
                        { type: "privacy", title: "Updated privacy policy restricting biometric data", date: "2024-11-15", source: "stateu.edu/policies" },
                        { type: "accessibility", title: "New accessibility requirements for online exams", date: "2024-10-20", source: "stateu.edu/accessibility" }
                    ],
                    buyingSignals: [
                        { type: "senate_minutes", title: "Faculty senate discussing proctoring alternatives", date: "2024-12-01", source: "stateu.edu/senate" },
                        { type: "rfp", title: "RFP for online assessment tools posted", date: "2024-11-28", source: "stateu.edu/procurement" }
                    ],
                    contacts: [
                        { name: "Dr. Sarah Chen", title: "Director of Online Learning", email: "schen@stateu.edu", phone: "555-0123" },
                        { name: "Mark Rodriguez", title: "LMS Administrator", email: "mrodriguez@stateu.edu", phone: "555-0124" }
                    ],
                    wedges: ["Remove room scans", "Lower false flags", "Privacy control with on-server storage"],
                    redFlags: []
                },
                {
                    id: 2,
                    name: "Northern Community College",
                    domain: "ncc.edu",
                    region: "Northeast",
                    timezone: "EST",
                    score: 72,
                    stage: "nurture",
                    lms: "Blackboard",
                    currentTools: ["Examity"],
                    modalityMix: "70% online, 20% hybrid, 10% on-campus",
                    whyNow: "Budget constraints, seeking cost-effective alternatives",
                    policySignals: [
                        { type: "integrity", title: "Academic integrity policy revision", date: "2024-09-10", source: "ncc.edu/policies" }
                    ],
                    buyingSignals: [
                        { type: "budget", title: "Budget review for proctoring services", date: "2024-10-15", source: "ncc.edu/finance" }
                    ],
                    contacts: [
                        { name: "Jennifer Walsh", title: "VP Academic Affairs", email: "jwalsh@ncc.edu", phone: "555-0234" }
                    ],
                    wedges: ["Cost reduction", "Simplified accommodations"],
                    redFlags: ["Limited IT resources"]
                },
                {
                    id: 3,
                    name: "Tech Institute",
                    domain: "techins.edu",
                    region: "South",
                    timezone: "CST",
                    score: 93,
                    stage: "P1",
                    lms: "Canvas",
                    currentTools: ["HonorLock"],
                    modalityMix: "80% online, 15% hybrid, 5% on-campus",
                    whyNow: "Major student privacy concerns raised, considering alternatives",
                    policySignals: [
                        { type: "privacy", title: "Student data protection mandate", date: "2024-12-05", source: "techins.edu/privacy" }
                    ],
                    buyingSignals: [
                        { type: "leadership_change", title: "New CIO prioritizing privacy-first solutions", date: "2024-11-01", source: "techins.edu/news" }
                    ],
                    contacts: [
                        { name: "Robert Kim", title: "CIO", email: "rkim@techins.edu", phone: "555-0345" },
                        { name: "Lisa Thompson", title: "Testing Center Director", email: "lthompson@techins.edu", phone: "555-0346" }
                    ],
                    wedges: ["Institution-controlled storage", "No biometric data collection", "FERPA compliance"],
                    redFlags: []
                }
            ],
            panorama: [
                {
                    id: 1,
                    name: "State University of California",
                    domain: "stateu.edu",
                    region: "West",
                    timezone: "PST",
                    score: 91,
                    stage: "P1",
                    lms: "Canvas",
                    currentTools: ["Ally"],
                    modalityMix: "60% online, 30% hybrid, 10% on-campus",
                    whyNow: "DOJ Title II compliance deadline approaching",
                    policySignals: [
                        { type: "accessibility", title: "WCAG 2.2 AA compliance mandate", date: "2024-11-20", source: "stateu.edu/accessibility" },
                        { type: "procurement", title: "Accessibility requirements in vendor contracts", date: "2024-10-15", source: "stateu.edu/procurement" }
                    ],
                    buyingSignals: [
                        { type: "staffing", title: "Hiring digital accessibility coordinator", date: "2024-11-25", source: "stateu.edu/careers" }
                    ],
                    contacts: [
                        { name: "Maria Santos", title: "Digital Accessibility Lead", email: "msantos@stateu.edu", phone: "555-0456" },
                        { name: "Dr. Sarah Chen", title: "Director of Online Learning", email: "schen@stateu.edu", phone: "555-0123" }
                    ],
                    wedges: ["Auto-remediation for PDFs", "Student self-service formats", "Department-level reporting"],
                    redFlags: []
                },
                {
                    id: 2,
                    name: "Northern Community College",
                    domain: "ncc.edu",
                    region: "Northeast",
                    timezone: "EST",
                    score: 68,
                    stage: "nurture",
                    lms: "Blackboard",
                    currentTools: ["Manual remediation"],
                    modalityMix: "70% online, 20% hybrid, 10% on-campus",
                    whyNow: "OCR complaint risk identified",
                    policySignals: [
                        { type: "accessibility", title: "Accessibility audit findings", date: "2024-09-30", source: "ncc.edu/audit" }
                    ],
                    buyingSignals: [
                        { type: "backlog", title: "500+ documents awaiting remediation", date: "2024-10-20", source: "ncc.edu/it" }
                    ],
                    contacts: [
                        { name: "Thomas Brown", title: "Disability Services Director", email: "tbrown@ncc.edu", phone: "555-0567" }
                    ],
                    wedges: ["Reduce remediation backlog", "Automated workflow"],
                    redFlags: ["Budget constraints"]
                }
            ],
            lumina: [
                {
                    id: 1,
                    name: "State University of California",
                    domain: "stateu.edu",
                    region: "West",
                    timezone: "PST",
                    score: 82,
                    stage: "P1",
                    lms: "Canvas",
                    currentTools: ["Panopto", "Basic Analytics"],
                    modalityMix: "60% online, 30% hybrid, 10% on-campus",
                    whyNow: "Strategic plan emphasizes data-driven student success",
                    policySignals: [
                        { type: "analytics", title: "Learning analytics initiative launched", date: "2024-11-10", source: "stateu.edu/strategic" }
                    ],
                    buyingSignals: [
                        { type: "strategic_plan", title: "Video engagement tied to retention goals", date: "2024-10-25", source: "stateu.edu/plan" }
                    ],
                    contacts: [
                        { name: "Dr. James Wilson", title: "Director of Institutional Research", email: "jwilson@stateu.edu", phone: "555-0678" },
                        { name: "Dr. Sarah Chen", title: "Director of Online Learning", email: "schen@stateu.edu", phone: "555-0123" }
                    ],
                    wedges: ["Early risk indicators", "Course-level dashboards", "LMS integration"],
                    redFlags: []
                },
                {
                    id: 2,
                    name: "Tech Institute",
                    domain: "techins.edu",
                    region: "South",
                    timezone: "CST",
                    score: 76,
                    stage: "nurture",
                    lms: "Canvas",
                    currentTools: ["Kaltura"],
                    modalityMix: "80% online, 15% hybrid, 5% on-campus",
                    whyNow: "Retention rates below target, seeking insights",
                    policySignals: [
                        { type: "data_governance", title: "Learning data policy established", date: "2024-10-05", source: "techins.edu/data" }
                    ],
                    buyingSignals: [
                        { type: "initiative", title: "Student success taskforce formed", date: "2024-11-15", source: "techins.edu/success" }
                    ],
                    contacts: [
                        { name: "Dr. Patricia Lee", title: "AVP Student Success", email: "plee@techins.edu", phone: "555-0789" }
                    ],
                    wedges: ["Viewing pattern analysis", "At-risk identification", "Faculty insights"],
                    redFlags: []
                }
            ]
        };

        // Application state
        let currentView = 'home';
        let selectedProduct = null;
        let selectedProspect = null;
        let searchTerm = '';
        let filterRegion = 'all';
        let filterStage = 'all';

        // Render functions
        function renderHome() {
            const products = [
                {
                    name: 'Verity',
                    description: 'Online proctoring solution focused on privacy, accessibility, and reducing false flags',
                    prospects: prospectData.verity.length,
                    p1Count: prospectData.verity.filter(p => p.stage === 'P1').length
                },
                {
                    name: 'Panorama',
                    description: 'Accessibility automation for LMS content, PDF remediation, and compliance',
                    prospects: prospectData.panorama.length,
                    p1Count: prospectData.panorama.filter(p => p.stage === 'P1').length
                },
                {
                    name: 'Lumina',
                    description: 'Video analytics for student engagement, early alerts, and retention insights',
                    prospects: prospectData.lumina.length,
                    p1Count: prospectData.lumina.filter(p => p.stage === 'P1').length
                }
            ];

            return `
                <div class="header">
                    <div class="logo">ðŸŽ¯ YuJa Prospect Intelligence</div>
                    <div style="color: var(--text-secondary);">Select a product to view prospects</div>
                </div>
                <div class="home-view">
                    ${products.map(product => `
                        <div class="product-card" onclick="selectProduct('${product.name.toLowerCase()}')">
                            <h2>${product.name}</h2>
                            <p class="product-description">${product.description}</p>
                            <div class="product-stats">
                                <div class="product-stat">
                                    <div class="product-stat-value">${product.prospects}</div>
                                    <div class="product-stat-label">Total Prospects</div>
                                </div>
                                <div class="product-stat">
                                    <div class="product-stat-value">${product.p1Count}</div>
                                    <div class="product-stat-label">Priority 1</div>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function renderProspectList() {
            const prospects = prospectData[selectedProduct] || [];
            const filtered = filterProspects(prospects);

            const stats = {
                total: filtered.length,
                p1: filtered.filter(p => p.stage === 'P1').length,
                nurture: filtered.filter(p => p.stage === 'nurture').length,
                avgScore: Math.round(filtered.reduce((acc, p) => acc + p.score, 0) / filtered.length || 0)
            };

            return `
                <div class="header">
                    <div class="logo">ðŸŽ¯ YuJa ${selectedProduct.charAt(0).toUpperCase() + selectedProduct.slice(1)}</div>
                    <div class="product-selector">
                        <button class="product-btn ${selectedProduct === 'verity' ? 'active' : ''}" onclick="selectProduct('verity')">Verity</button>
                        <button class="product-btn ${selectedProduct === 'panorama' ? 'active' : ''}" onclick="selectProduct('panorama')">Panorama</button>
                        <button class="product-btn ${selectedProduct === 'lumina' ? 'active' : ''}" onclick="selectProduct('lumina')">Lumina</button>
                    </div>
                </div>
                <div class="main-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value">${stats.total}</div>
                            <div class="stat-label">Total Prospects</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">${stats.p1}</div>
                            <div class="stat-label">Priority 1</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">${stats.nurture}</div>
                            <div class="stat-label">Nurture</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">${stats.avgScore}</div>
                            <div class="stat-label">Avg Score</div>
                        </div>
                    </div>

                    <div class="search-filter">
                        <input 
                            type="text" 
                            class="search-input" 
                            placeholder="Search institutions..."
                            value="${searchTerm}"
                            oninput="updateSearch(this.value)"
                        />
                        <select class="filter-select" onchange="updateRegionFilter(this.value)">
                            <option value="all">All Regions</option>
                            <option value="West">West</option>
                            <option value="Northeast">Northeast</option>
                            <option value="South">South</option>
                            <option value="Midwest">Midwest</option>
                        </select>
                        <select class="filter-select" onchange="updateStageFilter(this.value)">
                            <option value="all">All Stages</option>
                            <option value="P1">Priority 1</option>
                            <option value="nurture">Nurture</option>
                            <option value="research">Research</option>
                        </select>
                        <button class="export-btn" onclick="exportCSV()">ðŸ“¥ Export CSV</button>
                    </div>

                    <table class="prospects-table">
                        <thead>
                            <tr>
                                <th>Institution</th>
                                <th>Region</th>
                                <th>Score</th>
                                <th>Stage</th>
                                <th>Why Now</th>
                                <th>LMS</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${filtered.map(prospect => `
                                <tr onclick="showProspectDetail(${prospect.id})">
                                    <td>
                                        <div style="font-weight: 600;">${prospect.name}</div>
                                        <div style="font-size: 0.875rem; color: var(--text-secondary);">${prospect.domain}</div>
                                    </td>
                                    <td>${prospect.region}</td>
                                    <td>
                                        <span class="score-badge ${getScoreClass(prospect.score)}">${prospect.score}</span>
                                    </td>
                                    <td>
                                        <span class="stage-badge stage-${prospect.stage.toLowerCase().replace(' ', '')}">${prospect.stage}</span>
                                    </td>
                                    <td style="max-width: 300px; font-size: 0.875rem;">${prospect.whyNow}</td>
                                    <td>${prospect.lms}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
        }

        function renderProspectDetail() {
            const prospect = prospectData[selectedProduct].find(p => p.id === selectedProspect);
            if (!prospect) return '';

            const outreachTemplate = getOutreachTemplate(selectedProduct, prospect);

            return `
                <div class="modal-header">
                    <div>
                        <div class="modal-title">${prospect.name}</div>
                        <div style="color: var(--text-secondary); margin-top: 0.5rem;">
                            Score: ${prospect.score} | Stage: ${prospect.stage} | ${prospect.domain}
                        </div>
                    </div>
                    <button class="close-btn" onclick="closeModal()">âœ•</button>
                </div>
                <div class="modal-body">
                    <div class="detail-section">
                        <h3>ðŸ“Š Snapshot</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <span class="info-label">LMS</span>
                                <span class="info-value">${prospect.lms}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Current Tools</span>
                                <span class="info-value">${prospect.currentTools.join(', ')}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Modality Mix</span>
                                <span class="info-value">${prospect.modalityMix}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Region/Timezone</span>
                                <span class="info-value">${prospect.region} / ${prospect.timezone}</span>
                            </div>
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>âš¡ Why Now</h3>
                        <div class="evidence-item">
                            ${prospect.whyNow}
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>ðŸ“‹ Policy Signals</h3>
                        <ul class="evidence-list">
                            ${prospect.policySignals.map(signal => `
                                <li class="evidence-item">
                                    <strong>${signal.title}</strong>
                                    <div class="evidence-date">ðŸ“… ${signal.date} | ðŸ”— ${signal.source}</div>
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="detail-section">
                        <h3>ðŸ’° Buying Signals</h3>
                        <ul class="evidence-list">
                            ${prospect.buyingSignals.map(signal => `
                                <li class="evidence-item">
                                    <strong>${signal.title}</strong>
                                    <div class="evidence-date">ðŸ“… ${signal.date} | ðŸ”— ${signal.source}</div>
                                </li>
                            `).join('')}
                        </ul>
                    </div>

                    <div class="detail-section">
                        <h3>ðŸŽ¯ Key Wedges</h3>
                        <div class="info-grid">
                            ${prospect.wedges.map(wedge => `
                                <div class="evidence-item" style="margin: 0;">
                                    âœ“ ${wedge}
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <div class="detail-section">
                        <h3>ðŸ‘¥ Decision Circle</h3>
                        ${prospect.contacts.map(contact => `
                            <div class="contact-card">
                                <div class="contact-name">${contact.name}</div>
                                <div class="contact-title">${contact.title}</div>
                                <div class="contact-info">
                                    ðŸ“§ ${contact.email} | ðŸ“± ${contact.phone}
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    ${prospect.redFlags.length > 0 ? `
                        <div class="detail-section">
                            <h3>ðŸš© Red Flags</h3>
                            <ul class="evidence-list">
                                ${prospect.redFlags.map(flag => `
                                    <li class="evidence-item" style="border-left-color: var(--danger);">
                                        ${flag}
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    ` : ''}

                    <div class="detail-section">
                        <h3>ðŸ“§ Outreach Template</h3>
                        <div class="outreach-template">${outreachTemplate}</div>
                        <button class="copy-btn" onclick="copyToClipboard()">ðŸ“‹ Copy Template</button>
                    </div>
                </div>
            `;
        }

        // Helper functions
        function filterProspects(prospects) {
            return prospects.filter(p => {
                const matchesSearch = searchTerm === '' || 
                    p.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                    p.domain.toLowerCase().includes(searchTerm.toLowerCase());
                
                const matchesRegion = filterRegion === 'all' || p.region === filterRegion;
                const matchesStage = filterStage === 'all' || p.stage === filterStage;
                
                return matchesSearch && matchesRegion && matchesStage;
            });
        }

        function getScoreClass(score) {
            if (score >= 80) return 'score-high';
            if (score >= 60) return 'score-medium';
            return 'score-low';
        }

        function getOutreachTemplate(product, prospect) {
            const templates = {
                verity: `Subject: ${prospect.name} - Comparing notes on online exam integrity

Hi ${prospect.contacts[0]?.name.split(' ')[1] || 'there'},

I noticed your recent ${prospect.policySignals[0]?.title || 'policy updates'} and the discussions about ${prospect.whyNow}.

Teams nearby reduced room scans and cut review time by 60% while maintaining exam integrity. The pattern we're seeing:
${prospect.wedges.map(w => `â€¢ ${w}`).join('\n')}

Can I share a 5-minute recording showing how ${prospect.lms} schools are handling this?

Best,
[Your Name]`,
                
                panorama: `Subject: ${prospect.name} - Accessibility automation inside ${prospect.lms}

Hi ${prospect.contacts[0]?.name.split(' ')[1] || 'there'},

We noticed your ${prospect.policySignals[0]?.title || 'accessibility initiatives'} and the ${prospect.whyNow}.

Teams nearby moved remediation inside the LMS and cut tickets by 70%. They're using:
${prospect.wedges.map(w => `â€¢ ${w}`).join('\n')}

I can share a short recording and the playbook they used. Worth a quick look?

Best,
[Your Name]`,
                
                lumina: `Subject: ${prospect.name} - Connecting video engagement to student success

Hi ${prospect.contacts[0]?.name.split(' ')[1] || 'there'},

Your ${prospect.policySignals[0]?.title || 'strategic plan'} mentions ${prospect.whyNow}.

Peers connected viewing patterns to outcomes and flagged at-risk sections 3 weeks earlier. The workflow includes:
${prospect.wedges.map(w => `â€¢ ${w}`).join('\n')}

I can share a short recording that shows the ${prospect.lms} integration. Interested?

Best,
[Your Name]`
            };
            
            return templates[product] || '';
        }

        function copyToClipboard() {
            const template = document.querySelector('.outreach-template').textContent;
            navigator.clipboard.writeText(template).then(() => {
                const btn = document.querySelector('.copy-btn');
                const originalText = btn.textContent;
                btn.textContent = 'âœ“ Copied!';
                setTimeout(() => {
                    btn.textContent = originalText;
                }, 2000);
            });
        }

        // Event handlers
        function selectProduct(product) {
            selectedProduct = product;
            currentView = 'list';
            render();
        }

        function showProspectDetail(id) {
            selectedProspect = id;
            const modal = document.getElementById('modal');
            if (!modal) {
                const modalDiv = document.createElement('div');
                modalDiv.id = 'modal';
                modalDiv.className = 'modal';
                modalDiv.innerHTML = '<div class="modal-content"></div>';
                document.body.appendChild(modalDiv);
            }
            
            document.querySelector('.modal-content').innerHTML = renderProspectDetail();
            document.getElementById('modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
            selectedProspect = null;
        }

        function updateSearch(value) {
            searchTerm = value;
            render();
        }

        function updateRegionFilter(value) {
            filterRegion = value;
            render();
        }

        function updateStageFilter(value) {
            filterStage = value;
            render();
        }

        // Main render function
        function render() {
            const app = document.getElementById('app');
            
            if (currentView === 'home') {
                app.innerHTML = renderHome();
            } else if (currentView === 'list' && selectedProduct) {
                app.innerHTML = renderProspectList();
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            render();
            
            // Close modal on escape key
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                    closeUploadModal();
                }
            });
            
            // Close modal on outside click
            document.addEventListener('click', (e) => {
                if (e.target && e.target.id === 'modal') {
                    closeModal();
                }
                if (e.target && e.target.id === 'upload-modal') {
                    closeUploadModal();
                }
            });
        });
    </script>
</body>
</html>